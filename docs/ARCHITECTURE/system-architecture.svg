<?xml version="1.0" encoding="UTF-8"?>
<svg viewBox="0 0 1400 1000" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font-size: 28px; font-weight: bold; text-anchor: middle; fill: #1f2937; }
      .layer-title { font-size: 16px; font-weight: bold; text-anchor: middle; fill: #1f2937; }
      .box-text { font-size: 14px; text-anchor: middle; }
      .label { font-size: 12px; text-anchor: middle; fill: #4b5563; }
      .arrow { stroke: #4f46e5; stroke-width: 3; marker-end: url(#arrowhead); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#4f46e5" />
    </marker>
  </defs>

  <!-- Background -->
  <rect width="1400" height="1000" fill="#f9fafb"/>

  <!-- Title -->
  <text x="700" y="50" class="title">EISHRO Platform V7 - System Architecture</text>

  <!-- Frontend Layer -->
  <rect x="40" y="120" width="380" height="180" rx="15" fill="#ede9fe" stroke="#8b5cf6" stroke-width="3"/>
  <text x="230" y="160" class="layer-title">Frontend Layer</text>
  <text x="230" y="190" class="label">React 19 | TypeScript</text>
  <text x="230" y="215" class="label">Tailwind CSS | Vite</text>
  <text x="230" y="240" class="label">150+ Components</text>
  <text x="230" y="265" class="label">30+ Pages</text>

  <!-- Backend Layer -->
  <rect x="500" y="120" width="380" height="180" rx="15" fill="#fee2e2" stroke="#dc2626" stroke-width="3"/>
  <text x="690" y="160" class="layer-title">Backend Layer</text>
  <text x="690" y="190" class="label">Node.js | Express</text>
  <text x="690" y="215" class="label">REST API</text>
  <text x="690" y="240" class="label">14 Controllers</text>
  <text x="690" y="265" class="label">JWT Auth</text>

  <!-- Database Layer -->
  <rect x="960" y="120" width="380" height="180" rx="15" fill="#dbeafe" stroke="#2563eb" stroke-width="3"/>
  <text x="1150" y="160" class="layer-title">Database Layer</text>
  <text x="1150" y="190" class="label">MySQL</text>
  <text x="1150" y="215" class="label">11 Tables</text>
  <text x="1150" y="240" class="label">Transactions</text>
  <text x="1150" y="265" class="label">Indexes &amp; Keys</text>

  <!-- Services -->
  <text x="700" y="360" class="layer-title">Services Layer (10 Unified Services)</text>
  
  <rect x="80" y="380" width="140" height="90" rx="8" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
  <text x="150" y="410" class="label">ChatBot</text>
  <text x="150" y="435" class="label">AI Assistant</text>
  <text x="150" y="460" class="label">15.3 KB</text>

  <rect x="280" y="380" width="140" height="90" rx="8" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
  <text x="350" y="410" class="label">FuzzySearch</text>
  <text x="350" y="435" class="label">Smart Search</text>
  <text x="350" y="460" class="label">10.7 KB</text>

  <rect x="480" y="380" width="140" height="90" rx="8" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
  <text x="550" y="410" class="label">Inventory</text>
  <text x="550" y="435" class="label">Stock Tracking</text>
  <text x="550" y="460" class="label">13.8 KB</text>

  <rect x="680" y="380" width="140" height="90" rx="8" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
  <text x="750" y="410" class="label">Notifications</text>
  <text x="750" y="435" class="label">Real-time Alerts</text>
  <text x="750" y="460" class="label">15.1 KB</text>

  <rect x="880" y="380" width="140" height="90" rx="8" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
  <text x="950" y="410" class="label">SmartCart</text>
  <text x="950" y="435" class="label">Cart Management</text>
  <text x="950" y="460" class="label">8 KB</text>

  <rect x="1080" y="380" width="240" height="90" rx="8" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
  <text x="1200" y="410" class="label">Unified API Service</text>
  <text x="1200" y="435" class="label">Backend + Minimax</text>
  <text x="1200" y="460" class="label">373 KB (Merged)</text>

  <!-- Controllers -->
  <text x="700" y="550" class="layer-title">Core Controllers (14)</text>

  <rect x="80" y="570" width="130" height="70" rx="8" fill="#d1fae5" stroke="#10b981" stroke-width="2"/>
  <text x="145" y="600" class="label">Orders</text>
  <text x="145" y="620" class="label">Management</text>

  <rect x="250" y="570" width="130" height="70" rx="8" fill="#d1fae5" stroke="#10b981" stroke-width="2"/>
  <text x="315" y="600" class="label">Products</text>
  <text x="315" y="620" class="label">Catalog</text>

  <rect x="420" y="570" width="130" height="70" rx="8" fill="#d1fae5" stroke="#10b981" stroke-width="2"/>
  <text x="485" y="600" class="label">Payments</text>
  <text x="485" y="620" class="label">Moamalat</text>

  <rect x="590" y="570" width="130" height="70" rx="8" fill="#d1fae5" stroke="#10b981" stroke-width="2"/>
  <text x="655" y="600" class="label">Shipping</text>
  <text x="655" y="620" class="label">Logistics</text>

  <rect x="760" y="570" width="130" height="70" rx="8" fill="#d1fae5" stroke="#10b981" stroke-width="2"/>
  <text x="825" y="600" class="label">Inventory</text>
  <text x="825" y="620" class="label">Stock</text>

  <rect x="930" y="570" width="130" height="70" rx="8" fill="#d1fae5" stroke="#10b981" stroke-width="2"/>
  <text x="995" y="600" class="label">Loyalty</text>
  <text x="995" y="620" class="label">Programs</text>

  <rect x="1100" y="570" width="130" height="70" rx="8" fill="#d1fae5" stroke="#10b981" stroke-width="2"/>
  <text x="1165" y="600" class="label">Analytics</text>
  <text x="1165" y="620" class="label">Reports</text>

  <rect x="1270" y="570" width="130" height="70" rx="8" fill="#d1fae5" stroke="#10b981" stroke-width="2"/>
  <text x="1335" y="600" class="label">Coupons</text>
  <text x="1335" y="620" class="label">Discounts</text>

  <!-- External Integrations -->
  <text x="700" y="730" class="layer-title">External Integrations</text>

  <rect x="120" y="760" width="180" height="100" rx="10" fill="#ede9fe" stroke="#8b5cf6" stroke-width="2"/>
  <text x="210" y="795" class="label">Payment Gateway</text>
  <text x="210" y="820" class="label">Moamalat</text>
  <text x="210" y="845" class="label">Secure Transactions</text>

  <rect x="400" y="760" width="180" height="100" rx="10" fill="#ede9fe" stroke="#8b5cf6" stroke-width="2"/>
  <text x="490" y="795" class="label">AI Engine</text>
  <text x="490" y="820" class="label">Minimax</text>
  <text x="490" y="845" class="label">Recommendations</text>

  <rect x="680" y="760" width="180" height="100" rx="10" fill="#ede9fe" stroke="#8b5cf6" stroke-width="2"/>
  <text x="770" y="795" class="label">Cloud Storage</text>
  <text x="770" y="820" class="label">AWS S3</text>
  <text x="770" y="845" class="label">File Management</text>

  <rect x="960" y="760" width="180" height="100" rx="10" fill="#ede9fe" stroke="#8b5cf6" stroke-width="2"/>
  <text x="1050" y="795" class="label">Maps &amp; Location</text>
  <text x="1050" y="820" class="label">Leaflet</text>
  <text x="1050" y="845" class="label">Geolocation</text>

  <!-- Connection Lines -->
  <line x1="230" y1="300" x2="230" y2="380" class="arrow"/>
  <line x1="690" y1="300" x2="690" y2="380" class="arrow"/>
  <line x1="1150" y1="300" x2="750" y2="380" class="arrow"/>
  
  <line x1="500" y1="470" x2="500" y2="570" class="arrow"/>
  <line x1="700" y1="470" x2="700" y2="570" class="arrow"/>
  <line x1="900" y1="470" x2="900" y2="570" class="arrow"/>

  <!-- Stats Box -->
  <rect x="80" y="900" width="1240" height="80" rx="10" fill="#f3f4f6" stroke="#d1d5db" stroke-width="2"/>
  <text x="120" y="935" class="label" font-weight="bold">✅ Improvements Made:</text>
  <text x="120" y="960" class="label">✓ Removed 3 duplicate files (lib/api.ts, backend/api.ts, enhancedApi.ts) | ✓ Merged API services into unified 373KB service</text>
  <text x="120" y="980" class="label">✓ Eliminated service duplication | ✓ Zero critical errors in merged code | ✓ Ready for deployment</text>
</svg>